# PDL说明

## 1.良好PDL的结构

为了编写有效的PDL，建议按以下结构组织内容：

### a. 头部信息

- **程序/模块名称**：模块的标题或标识。
- **目的**：简要描述模块的功能或目标。
- **输入和输出**：说明数据的输入、输出以及任何共享的变量或状态。
- **前置条件**：执行前预期的条件或假设。
- **后置条件**：执行后系统的预期状态。
- **作者和日期**：记录作者信息和日期以便于追踪更改。

### b. 逐步逻辑（主体部分）

- **使用清晰的语句**：以结构化、命令式的句子书写，与自然语言尽可能接近，同时保持正式结构。
- **定义每一步**：将程序中的每个操作定义为单独的步骤或模块，通常使用缩进显示逻辑的层次和嵌套。
- **控制流程**：
  - 使用常见的控制结构，例如`IF`、`THEN`、`ELSE`、`WHILE`和`FOR`。
  - 明确指出顺序、选择和循环结构。
- **避免特定语法**：避免编程语言的特定语法，重点描述每个语句的逻辑，而不是代码实现方式。
- **复杂操作**：如果功能复杂，将其分解为子步骤或逻辑块，并为其标注标签以增强清晰度。

### c. 错误处理和边界情况

- 描述程序如何处理潜在的错误或意外输入。
- 使用如`IF（错误条件）THEN`的条件，并指定错误处理响应，例如日志记录或重试机制。
- 记录系统对于边界情况的响应或恢复操作。

### d. 注释和说明

- 添加注释以阐明某些部分或解释复杂的逻辑。
- 说明做出某些决策的原因，如果它们并非一目了然。

### e. 模块化组织（如适用）

- 对于大型程序，将PDL分解为更小的、逻辑上独立的模块或函数，每个模块应具有其自己的输入、输出和目的。
- 这可以保持设计的模块化，并有助于维护和扩展。

## 2.每条PDL语句中的关键要素

为确保完整性，在PDL的每一步中包括以下内容：

- **操作描述**：清晰地说明此步骤程序应执行的内容。
- **条件检查（如适用）**：说明执行此操作的条件。
- **预期结果**：描述此操作完成后要实现或更改的内容。
- **使用的变量/资源**：列出此步骤涉及的重要变量或资源。

## 3.PDL结构示例

以下一个简单的身份验证模块的PDL示例（后端）：

```txt
模块名称：用户身份验证
目的：验证用户凭据，若凭据正确则授予系统访问权限。
输入：用户名（字符串），密码（字符串）
输出：认证状态（布尔值），错误信息（字符串）
前置条件：用户数据库可访问，且用户数据已填充
后置条件：设置用户访问级别；记录登录尝试

开始

1. 将`authentication_status`初始化为FALSE
2. 从用户数据库中检索`username`的存储密码哈希值
   - 如果在数据库中未找到`username`
      则
         设置`error_message`为“用户未找到”
         返回`authentication_status`为FALSE
   - 否则
      继续执行步骤3

3. 比较提供的密码哈希值与存储的哈希值
   - 如果哈希值匹配
      则
         将`authentication_status`设置为TRUE
         记录`username`的成功登录尝试
      否则
         将`error_message`设置为“密码错误”
         记录`username`的失败登录尝试

4. 返回`authentication_status`

结束
```

前端界面的PDL示例：

```
界面名称：用户登录页面
目标：验证用户凭据，登录成功后跳转到主页
预置条件：用户未登录，页面已加载
后置条件：用户登录成功，跳转到主页

用户操作流程：

1. 用户在“用户名”输入框中输入文本
   - 界面响应：实时验证输入是否为空

2. 用户在“密码”输入框中输入文本
   - 界面响应：实时验证输入是否符合密码格式（至少6个字符）

3. 用户点击“登录”按钮
   - IF “用户名”或“密码”输入框为空
      THEN 显示“用户名和密码不能为空”错误信息
   - ELSE 显示加载动画，并发送登录请求

4. 等待服务器响应
   - IF 登录成功
      THEN
         - 设置用户状态为已登录
         - 跳转到主页
   - ELSE 显示“用户名或密码错误”提示，并清空密码输入框

组件交互描述：

1. **用户名输入框**：
   - 用户输入时触发实时验证逻辑
   - 验证不通过时显示错误提示

2. **密码输入框**：
   - 用户输入时触发密码格式验证逻辑
   - 验证不通过时显示错误提示

3. **登录按钮**：
   - 依赖用户名和密码输入框的内容，只有在两者均通过验证时才可点击

异常处理：

1. 当网络请求超时时，显示“请求超时，请稍后重试”的提示
2. 服务器返回500错误时，显示“服务器错误，请稍后再试”

状态管理：

1. 登录状态：成功登录后，显示用户信息并隐藏登录按钮
2. 未登录状态：默认显示登录按钮，允许用户输入凭据
```



## 4.编写有效PDL的指南

- **保持一致性**：在整个文档中使用一致的语言、结构和缩进。
- **保持高级别但具体**：关注程序应做什么而不是如何编码实现。
- **检查完整性**：确保每个动作、条件和结果都完整描述，以避免歧义。
- **确保可读性**：使用清晰的语言，以便所有利益相关者都能理解，包括非技术人员。
- **反复修改和更新**：随着需求或逻辑的更改，及时更新PDL以反映最新状态。